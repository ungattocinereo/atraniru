# Contact Form - Telegram Integration

## –û–±–∑–æ—Ä

–§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/contacts` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é –≤ Telegram –∫–∞–Ω–∞–ª —á–µ—Ä–µ–∑ Telegram Bot API.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Node.js Adapter** (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
```bash
npm install @astrojs/node
```

2. **astro.config.mjs** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ server mode:
```js
import { defineConfig } from 'astro/config';
import node from '@astrojs/node';

export default defineConfig({
  output: 'server',
  adapter: node({
    mode: 'standalone'
  })
});
```

### .env —Ñ–∞–π–ª

```env
TELEGRAM_BOT_TOKEN=8034575815:AAE_0LmptM5U91Fg7T934YcRVc3yccaIrng
TELEGRAM_CHAT_ID=-1002455823047
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å `.env` —Ñ–∞–π–ª –≤ git!

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

–°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å —ç–º–æ–¥–∑–∏ –±–∞—à–Ω–∏ üóº –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç:

```
üóº –°–æ–æ–±—â–µ–Ω–∏–µ —Å —Å–∞–π—Ç–∞ Atrani.ru

üë§ –ò–º—è: [–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
üìß Email: [email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]

üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ:
[—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è]

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:

üåê IP-–∞–¥—Ä–µ—Å: [IP]
üïê –î–∞—Ç–∞/–í—Ä–µ–º—è: [–¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –≤ –µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ]
üñ• User Agent: [–±—Ä–∞—É–∑–µ—Ä –∏ –û–°]
üîó Referer: [–æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–µ–ª]
üåç –Ø–∑—ã–∫: [—è–∑—ã–∫ –±—Ä–∞—É–∑–µ—Ä–∞]
```

## –§–∞–π–ª—ã

1. **`/src/pages/api/contact.ts`** - API endpoint –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ä–º—ã
2. **`/src/pages/contacts.astro`** - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ñ–æ—Ä–º–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
3. **`.env`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –≤ git)

## –ê–Ω–∏–º–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –±–æ–ª—å—à–æ–π –∫–æ–Ω–≤–µ—Ä—Ç —Å:
- ‚úì –ì–∞–ª–æ—á–∫–æ–π –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
- –°–æ–æ–±—â–µ–Ω–∏–µ–º "–°–ø–∞—Å–∏–±–æ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ!"
- –¢–µ–∫—Å—Ç–æ–º "–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–∂–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –∫ –Ω–∞–º –≤ Telegram. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–∏–µ —Å–µ–∫—É–Ω–¥—ã."
- –ö–Ω–æ–ø–∫–æ–π "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—â—ë —Å–æ–æ–±—â–µ–Ω–∏–µ"

–í—ã—Å–æ—Ç–∞ —Ñ–æ—Ä–º—ã –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è fade in/out.

## –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

–í—Å–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è:
- ‚úÖ –ò–º—è (required)
- ‚úÖ Email (required, –≤–∞–ª–∏–¥–∞—Ü–∏—è email)
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ (required)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä: `npm run dev`
2. –û—Ç–∫—Ä—ã—Ç—å http://localhost:4322/contacts
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram –∫–∞–Ω–∞–ª "Amalfi.Day [Tech]"

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

```bash
curl -X POST http://localhost:4322/api/contact \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–¢–µ—Å—Ç–æ–≤–æ–µ –∏–º—è",
    "email": "test@example.com",
    "message": "–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
  }'
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- ‚ùå –ü—É—Å—Ç—ã–µ –ø–æ–ª—è ‚Üí "–í—Å–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è"
- ‚ùå –û—à–∏–±–∫–∞ Telegram API ‚Üí "–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram"
- ‚ùå –î—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏ ‚Üí "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. ‚úÖ Bot token —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `.env` (–Ω–µ –≤ –∫–æ–¥–µ)
2. ‚úÖ HTML-escape –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
3. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
4. ‚úÖ HTTPS –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

## Production Deployment

–ü—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–∞ production —É–±–µ–¥–∏—Ç–µ—Å—å:
1. `.env` —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
2. HTTPS –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è IP)
3. Telegram bot –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –≤ –∫–∞–Ω–∞–ª

## –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] Rate limiting (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)
- [ ] CAPTCHA (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (backup)
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (backup)
- [ ] Webhook –≤–º–µ—Å—Ç–æ polling
