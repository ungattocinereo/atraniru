---
interface Props {
  title: string;
  description?: string;
  ogImage?: string;
  ogType?: string;
}

const { title, description = 'Атрани — аутентичный отдых на Амальфитанском побережье. Эно-гастро-туры, фото прогулки, апартаменты.', ogImage = '/meta.png', ogType = 'website' } = Astro.props;

const siteUrl = 'https://atrani.ru';
const canonicalUrl = new URL(Astro.url.pathname, siteUrl).href;
const absoluteOgImage = ogImage.startsWith('http') ? ogImage : new URL(ogImage, siteUrl).href;
---

<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />

    <!-- Canonical -->
    <link rel="canonical" href={canonicalUrl} />

    <!-- Open Graph -->
    <meta property="og:site_name" content="Atrani.ru" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content={ogType} />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:image" content={absoluteOgImage} />
    <meta property="og:locale" content="ru_RU" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={absoluteOgImage} />

    <title>{title}</title>

    <!-- Favicons -->
    <link rel="icon" href="/favicon.ico" sizes="any" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="theme-color" content="#000A27" />

    <slot name="head" />
  </head>
  <body>
    <a href="#main" class="skip-link">Перейти к содержимому</a>

    <header class="header" role="banner">
      <a href="/" class="logo">Atrani.ru</a>
      <nav class="nav" role="navigation">
        <a href="/experience">Экскурсии</a>
        <a href="/apartments">Апартаменты</a>
        <a href="/blog">Блог</a>
        <a href="/contacts">Контакты</a>
      </nav>
      <button class="burger" type="button" aria-label="Открыть меню" aria-expanded="false" aria-controls="mobile-menu">
        <span class="burger-line"></span>
        <span class="burger-line"></span>
        <span class="burger-line"></span>
      </button>
    </header>

    <div class="mobile-overlay" id="mobile-menu" aria-hidden="true">
      <nav class="mobile-nav" role="navigation">
        <a href="/experience"><span class="mobile-nav-num">01</span><span class="mobile-nav-dash">&mdash;</span>Экскурсии</a>
        <a href="/apartments"><span class="mobile-nav-num">02</span><span class="mobile-nav-dash">&mdash;</span>Апартаменты</a>
        <a href="/blog"><span class="mobile-nav-num">03</span><span class="mobile-nav-dash">&mdash;</span>Блог</a>
        <a href="/contacts"><span class="mobile-nav-num">04</span><span class="mobile-nav-dash">&mdash;</span>Контакты</a>
      </nav>
      <div class="mobile-social">
        <a href="https://facebook.com/atrani.ru" target="_blank" rel="noopener"><span class="mobile-social-badge">FB</span>Фейсбук</a>
        <a href="https://instagram.com/atrani.ru" target="_blank" rel="noopener"><span class="mobile-social-badge">IG</span>Инстаграм</a>
        <a href="https://t.me/atraniru" target="_blank" rel="noopener"><span class="mobile-social-badge">TG</span>Телеграм</a>
        <a href="https://wa.me/393270972329" target="_blank" rel="noopener"><span class="mobile-social-badge">WA</span>Вотсап</a>
      </div>
    </div>

    <main id="main">
      <slot />
    </main>

    <footer class="footer">
      <div class="footer-grid">
        <div class="footer-brand">
          <a href="/" class="footer-logo">Atrani.ru</a>
          <p class="footer-tagline">Ваш проводник по Амальфитанскому побережью</p>
          <div class="social-links">
            <a href="https://facebook.com/atrani.ru" aria-label="Facebook">FB</a>
            <a href="https://instagram.com/atrani.ru" aria-label="Instagram">IG</a>
            <a href="https://t.me/atraniru" aria-label="Telegram">TG</a>
            <a href="https://wa.me/393270972329" aria-label="WhatsApp">WA</a>
          </div>
        </div>

        <div class="footer-col">
          <h4>Окрестности</h4>
          <ul>
            <li>
              <a href="/">
                <svg class="icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
                Главное
              </a>
            </li>
            <li>
              <a href="/transport">
                <svg class="icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 16c0 .88.39 1.67 1 2.22V20c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h8v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1.78c.61-.55 1-1.34 1-2.22V6c0-3.5-3.58-4-8-4s-8 .5-8 4v10zm3.5 1c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm9 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm1.5-6H6V6h12v5z"/></svg>
                Транспорт
              </a>
            </li>
            <li>
              <a href="https://cnr.pw/shuttle" target="_blank" rel="noopener">
                <svg class="icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 5H3c-1.1 0-2 .89-2 2v9h2c0 1.65 1.34 3 3 3s3-1.35 3-3h5.5c0 1.65 1.34 3 3 3s3-1.35 3-3H23v-5l-6-6zM3 11V7h4v4H3zm3 6.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm7-6.5H9V7h4v4zm4.5 6.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM15 11V7h1l4 4h-5z"/></svg>
                Шаттл в аэропорт
              </a>
            </li>
            <li>
              <a href="https://guide.amalfi.day" target="_blank" rel="noopener">
                <svg class="icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                Гришин гид
              </a>
            </li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>Услуги</h4>
          <ul>
            <li>
              <a href="/apartments">
                <svg class="icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
                Апартаменты
              </a>
            </li>
            <li>
              <a href="/experience">
                <svg class="icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                Экскурсии
              </a>
            </li>
            <li>
              <a href="/photos">
                <svg class="icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>
                Фотографии
              </a>
            </li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>Наше всё</h4>
          <ul>
            <li>
              <a href="/blog">
                <svg class="icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
                Блог
              </a>
            </li>
            <li>
              <a href="/orel-i-reshka-amalfi">
                <svg class="icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"/></svg>
                Орёл и решка
              </a>
            </li>
            <li>
              <a href="/contacts">
                <svg class="icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                Контакты
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <div class="footer-copyright">
          <span>&copy; 2006–2026 CristallPont S.R.L. Все права защищены.</span>
          <span>•</span>
          <a href="/privacy-policy">Privacy Policy</a>
        </div>
        <div class="footer-credit">
          • Идея проекта и Разработка Граф '<a href="https://cinereo.it" target="_blank" rel="noopener">Cinereo</a>' Монтегриша
        </div>
      </div>
    </footer>

    <script>
      // Scroll reveal animation
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.1 });

      document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

      // Mobile menu
      const burger = document.querySelector('.burger');
      const overlay = document.getElementById('mobile-menu');

      if (burger && overlay) {
        burger.addEventListener('click', () => {
          const isOpen = overlay.classList.toggle('is-open');
          burger.classList.toggle('is-active', isOpen);
          burger.setAttribute('aria-expanded', String(isOpen));
          overlay.setAttribute('aria-hidden', String(!isOpen));
          document.body.classList.toggle('menu-open', isOpen);
        });

        // Close on link click
        overlay.querySelectorAll('a').forEach(link => {
          link.addEventListener('click', () => {
            overlay.classList.remove('is-open');
            burger.classList.remove('is-active');
            burger.setAttribute('aria-expanded', 'false');
            overlay.setAttribute('aria-hidden', 'true');
            document.body.classList.remove('menu-open');
          });
        });

        // Close on Escape
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && overlay.classList.contains('is-open')) {
            overlay.classList.remove('is-open');
            burger.classList.remove('is-active');
            burger.setAttribute('aria-expanded', 'false');
            overlay.setAttribute('aria-hidden', 'true');
            document.body.classList.remove('menu-open');
            burger.focus();
          }
        });
      }
    </script>
  </body>
</html>

<style is:global>
  @import '../styles/global.css';
</style>
