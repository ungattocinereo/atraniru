---
import Layout from '../layouts/Layout.astro';
---

<Layout
  title="Контакты — Atrani.ru"
  description="Свяжитесь с нами для организации экскурсий, бронирования апартаментов и любых вопросов об отдыхе на Амальфитанском побережье."
>
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-bg-text" aria-hidden="true">АТРАНИ</div>

    <div class="hero-content">
      <p class="hero-label">Свяжитесь с нами</p>
      <h1>
        <span class="highlight">НАШИ</span>
        ЛЮДИ
      </h1>
      <p class="hero-subtitle">
        Быстрее и надёжнее любого Пинтереста
      </p>
    </div>

    <div class="scroll-indicator">Scroll</div>
  </section>

  <!-- Intro Section -->
  <section class="intro-section">
    <div class="intro-content reveal">
      <div class="section-header">
        <p class="section-label">01 — Впечатления</p>
        <h2 class="section-title">Чудеса Побережья</h2>
      </div>

      <div class="intro-text">
        <p>
          На побережье Амальфи происходят чудеса. Для нас главным чудом является то, что мы полюбили это место всей душой — и кажется, оно полюбило нас. С каждым днем мы узнаём всё больше новых и интересных мест, и этими впечатлениями хотим поделиться с вами.
        </p>
        <p>
          Мы можем показать вам намного больше, чем вы сможете увидеть самостоятельно. Узкие улочки, пустынные набережные, прекрасный вид на море и потрясающие закаты — всё это ждёт вас в Атрани.
        </p>
        <a href="/experiences" class="btn btn-primary">Смотреть экскурсии</a>
      </div>
    </div>
  </section>

  <!-- Trust Factors -->
  <section class="trust-section">
    <div class="trust-grid">
      <div class="trust-card reveal">
        <div class="trust-icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
          </svg>
        </div>
        <h3>Знаем многое</h3>
        <p>После доброго десятка лет на побережье завели множество знакомств</p>
      </div>

      <div class="trust-card reveal">
        <div class="trust-icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
            <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
          </svg>
        </div>
        <h3>Официальные</h3>
        <p>Мы работаем официально — S.R.L., это как российское ООО</p>
      </div>

      <div class="trust-card reveal">
        <div class="trust-icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
            <path d="M12 3L1 9l11 6 9-4.91V17h2V9L12 3zM5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82z"/>
          </svg>
        </div>
        <h3>Образованные</h3>
        <p>Итальянский, дизайн, туризм, маркетинг, литература, эно-гастрономия</p>
      </div>

      <div class="trust-card reveal">
        <div class="trust-icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
            <path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/>
          </svg>
        </div>
        <h3>Профессиональные</h3>
        <p>Гостеприимство, фотография и программирование</p>
      </div>
    </div>
  </section>

  <!-- Quote Section -->
  <section class="quote-section">
    <div class="quote-wrapper reveal">
      <blockquote class="quote-large">
        Атрани как будто специально создан для влюблённых. Узкие улочки, пустынные набережные, прекрасный вид на море и потрясающие закаты — всё настраивает на романтичный лад.
      </blockquote>
    </div>
  </section>

  <!-- Contact Form Section -->
  <section class="contact-form-section" id="contact-form">
    <div class="contact-form-container">
      <div class="section-header reveal">
        <p class="section-label">02 — Написать нам</p>
        <h2 class="section-title">В Атрани отдых прекрасен<br>в любое время года</h2>
      </div>

      <form class="contact-form reveal" id="contactForm">
        <div class="form-fields" id="formFields">
          <div class="form-row">
            <div class="form-group">
              <label for="name" class="form-label">Имя <span class="required">*</span></label>
              <input
                type="text"
                id="name"
                name="name"
                class="form-input"
                placeholder="Ваше имя"
                required
                autocomplete="name"
              >
            </div>

            <div class="form-group">
              <label for="email" class="form-label">Email <span class="required">*</span></label>
              <input
                type="email"
                id="email"
                name="email"
                class="form-input"
                placeholder="hello@example.com"
                required
                autocomplete="email"
              >
            </div>
          </div>

          <div class="form-group">
            <label for="message" class="form-label">Сообщение <span class="required">*</span></label>
            <textarea
              id="message"
              name="message"
              class="form-textarea"
              placeholder="Расскажите, чем мы можем помочь..."
              rows="6"
              required
            ></textarea>
          </div>

          <button type="submit" class="btn btn-primary btn-submit">
            <span class="btn-text">Отправить сообщение</span>
            <svg class="btn-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
              <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
          </button>
        </div>

        <div class="form-success" id="formSuccess" style="display: none;">
          <div class="success-envelope">
            <svg class="envelope-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
              <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
            </svg>
            <div class="success-checkmark">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
            </div>
          </div>
          <h3 class="success-title">Спасибо за сообщение!</h3>
          <p class="success-text">
            Ваше сообщение уже доставлено к нам в Telegram.<br>
            Мы свяжемся с вами в ближайшие секунды.
          </p>
          <button type="button" class="btn btn-outline btn-small" id="sendAnother">
            Отправить ещё сообщение
          </button>
        </div>

        <div class="form-message" id="formMessage"></div>
      </form>
    </div>
  </section>

  <!-- Contact Info -->
  <section class="contact-info-section">
    <div class="contact-info-grid reveal">
      <div class="contact-info-card">
        <div class="contact-info-icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
          </svg>
        </div>
        <h3>Email</h3>
        <a href="mailto:hello@atrani.ru">hello@atrani.ru</a>
      </div>

      <div class="contact-info-card">
        <div class="contact-info-icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
          </svg>
        </div>
        <h3>WhatsApp</h3>
        <a href="https://wa.me/393270972329">+39 327 097 2329</a>
      </div>

      <div class="contact-info-card">
        <div class="contact-info-icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
            <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
          </svg>
        </div>
        <h3>Telegram</h3>
        <a href="https://t.me/atraniru">@atraniru</a>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* ==========================================================================
     Contact Page Styles
     ========================================================================== */

  /* Hero */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative;
    background: var(--color-navy-deep);
    color: white;
    overflow: hidden;
    padding: 120px 40px 80px;
  }

  .hero-bg-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: var(--font-display);
    font-size: clamp(150px, 25vw, 400px);
    font-weight: 900;
    color: rgba(255, 255, 255, 0.03);
    pointer-events: none;
    white-space: nowrap;
    user-select: none;
  }

  .hero-content {
    position: relative;
    z-index: 1;
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
  }

  .hero-label {
    font-size: 14px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 3px;
    color: var(--color-gray);
    margin-bottom: 24px;
    position: relative;
    padding-left: 60px;
    opacity: 0;
    animation: fadeInUp 1s var(--ease-out) 0.2s forwards;
  }

  .hero-label::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 2px;
    background: var(--color-orange);
  }

  .hero h1 {
    font-family: var(--font-display);
    font-size: clamp(60px, 12vw, 180px);
    font-weight: 900;
    line-height: 0.9;
    letter-spacing: -4px;
    margin-bottom: 32px;
    opacity: 0;
    animation: fadeInUp 1s var(--ease-out) 0.3s forwards;
  }

  .hero h1 .highlight {
    color: var(--color-orange);
    display: block;
  }

  .hero-subtitle {
    font-size: clamp(18px, 2vw, 24px);
    color: var(--color-gray);
    max-width: 600px;
    margin-bottom: 40px;
    opacity: 0;
    animation: fadeInUp 1s var(--ease-out) 0.4s forwards;
  }

  .scroll-indicator {
    position: absolute;
    bottom: 40px;
    left: 40px;
    display: flex;
    align-items: center;
    gap: 16px;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--color-gray);
  }

  .scroll-indicator::after {
    content: '';
    width: 60px;
    height: 1px;
    background: var(--color-gray);
  }

  @media (max-width: 768px) {
    .hero {
      padding: 100px 20px 60px;
    }

    .scroll-indicator {
      left: 20px;
    }
  }

  /* Intro Section */
  .intro-section {
    padding: 80px 40px;
    max-width: 1200px;
    margin: 0 auto;
  }

  .intro-content {
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    gap: 60px;
    align-items: start;
  }

  .intro-text {
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  .intro-text p {
    font-size: 18px;
    line-height: 1.7;
    color: var(--color-gray-dark);
  }

  /* Trust Section */
  .trust-section {
    padding: 80px 40px;
    background: var(--color-bg-light);
  }

  .trust-grid {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2px;
  }

  .trust-card {
    background: white;
    padding: 40px 32px;
    text-align: center;
    transition: transform 0.3s var(--ease-out);
  }

  .trust-card:hover {
    transform: translateY(-4px);
  }

  .trust-icon {
    width: 64px;
    height: 64px;
    margin: 0 auto 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-navy-deep);
    color: var(--color-orange);
    border-radius: 0;
  }

  .trust-icon svg {
    width: 32px;
    height: 32px;
  }

  .trust-card h3 {
    font-family: var(--font-display);
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 12px;
    color: var(--color-navy-deep);
  }

  .trust-card p {
    font-size: 14px;
    line-height: 1.6;
    color: var(--color-gray-dark);
  }

  /* Quote Section */
  .quote-section {
    padding: 120px 40px;
    background: var(--color-navy-deep);
    color: white;
  }

  .quote-wrapper {
    max-width: 900px;
    margin: 0 auto;
  }

  .quote-large {
    font-family: var(--font-display);
    font-size: clamp(24px, 4vw, 36px);
    font-weight: 700;
    line-height: 1.4;
    padding: 0;
    border: none;
    background: transparent;
    position: relative;
    padding-left: 40px;
  }

  .quote-large::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 6px;
    background: var(--color-orange);
  }

  /* Contact Form Section */
  .contact-form-section {
    padding: 120px 40px;
    background: white;
  }

  .contact-form-container {
    max-width: 800px;
    margin: 0 auto;
  }

  .contact-form-container .section-header {
    margin-bottom: 60px;
  }

  .contact-form {
    position: relative;
    min-height: 600px;
  }

  .form-fields {
    display: flex;
    flex-direction: column;
    gap: 32px;
    opacity: 1;
    transform: scale(1);
    transition: all 0.5s var(--ease-out);
  }

  .form-fields.hiding {
    opacity: 0;
    transform: scale(0.95);
    pointer-events: none;
  }

  .form-row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 24px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .form-label {
    font-size: 14px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--color-navy-deep);
  }

  .required {
    color: var(--color-orange);
  }

  .form-input,
  .form-textarea {
    width: 100%;
    padding: 16px 20px;
    font-family: var(--font-body);
    font-size: 16px;
    line-height: 1.5;
    color: var(--color-navy-deep);
    background: white;
    border: 2px solid var(--color-gray-light);
    transition: all 0.3s var(--ease-out);
  }

  .form-input:focus,
  .form-textarea:focus {
    outline: none;
    border-color: var(--color-navy-deep);
    box-shadow: 0 0 0 3px rgba(10, 22, 40, 0.1);
  }

  .form-input::placeholder,
  .form-textarea::placeholder {
    color: var(--color-gray);
  }

  .form-textarea {
    resize: vertical;
    min-height: 150px;
  }

  /* Custom Checkbox */
  .form-checkbox-group {
    margin-top: 8px;
  }

  .form-checkbox-label {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    cursor: pointer;
    user-select: none;
  }

  .form-checkbox {
    appearance: none;
    width: 24px;
    height: 24px;
    min-width: 24px;
    border: 2px solid var(--color-gray-light);
    background: white;
    cursor: pointer;
    position: relative;
    transition: all 0.3s var(--ease-out);
    margin-top: 2px;
  }

  .form-checkbox:checked {
    background: var(--color-navy-deep);
    border-color: var(--color-navy-deep);
  }

  .form-checkbox:checked::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 12px;
    height: 12px;
    background: var(--color-orange);
    clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
  }

  .form-checkbox:focus {
    outline: 3px solid var(--color-orange);
    outline-offset: 2px;
  }

  .checkbox-text {
    font-size: 14px;
    line-height: 1.6;
    color: var(--color-gray-dark);
  }

  .privacy-link {
    color: var(--color-navy-deep);
    text-decoration: underline;
    font-weight: 600;
    transition: color 0.3s var(--ease-out);
  }

  .privacy-link:hover {
    color: var(--color-orange);
  }

  /* Submit Button */
  .btn-submit {
    width: 100%;
    justify-content: center;
    padding: 20px 40px;
    font-size: 16px;
    margin-top: 16px;
  }

  .btn-icon {
    width: 20px;
    height: 20px;
    transition: transform 0.3s var(--ease-out);
  }

  .btn-submit:hover .btn-icon {
    transform: translateX(4px);
  }

  /* Success State */
  .form-success {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 60px 40px;
    opacity: 0;
    transform: scale(0.9);
    transition: all 0.6s var(--ease-out);
  }

  .form-success.showing {
    opacity: 1;
    transform: scale(1);
  }

  .success-envelope {
    position: relative;
    width: 160px;
    height: 160px;
    margin-bottom: 32px;
    background: var(--color-navy-deep);
    display: flex;
    align-items: center;
    justify-content: center;
    animation: envelopeBounce 0.6s var(--ease-out) 0.3s both;
  }

  @keyframes envelopeBounce {
    0% {
      transform: scale(0) rotate(-180deg);
    }
    50% {
      transform: scale(1.1) rotate(10deg);
    }
    100% {
      transform: scale(1) rotate(0deg);
    }
  }

  .envelope-icon {
    width: 80px;
    height: 80px;
    color: var(--color-orange);
  }

  .success-checkmark {
    position: absolute;
    top: -8px;
    right: -8px;
    width: 48px;
    height: 48px;
    background: var(--color-orange);
    border: 4px solid white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: checkmarkPop 0.4s var(--ease-out) 0.7s both;
  }

  @keyframes checkmarkPop {
    0% {
      transform: scale(0);
    }
    50% {
      transform: scale(1.2);
    }
    100% {
      transform: scale(1);
    }
  }

  .success-checkmark svg {
    width: 28px;
    height: 28px;
    color: white;
  }

  .success-title {
    font-family: var(--font-display);
    font-size: 28px;
    font-weight: 800;
    color: var(--color-navy-deep);
    margin-bottom: 16px;
    animation: fadeInUp 0.5s var(--ease-out) 0.9s both;
  }

  .success-text {
    font-size: 16px;
    line-height: 1.6;
    color: var(--color-gray-dark);
    margin-bottom: 32px;
    animation: fadeInUp 0.5s var(--ease-out) 1s both;
  }

  .form-success .btn {
    animation: fadeInUp 0.5s var(--ease-out) 1.1s both;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Form Message */
  .form-message {
    padding: 16px 20px;
    border-radius: 0;
    font-size: 14px;
    font-weight: 600;
    text-align: center;
    display: none;
    margin-top: 16px;
  }

  .form-message.error {
    display: block;
    background: #FFEBEE;
    color: #C62828;
    border: 2px solid #F44336;
  }

  /* Contact Info Section */
  .contact-info-section {
    padding: 80px 40px;
    background: var(--color-bg-light);
  }

  .contact-info-grid {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2px;
  }

  .contact-info-card {
    background: white;
    padding: 40px;
    text-align: center;
    transition: all 0.3s var(--ease-out);
  }

  .contact-info-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 32px rgba(0, 10, 39, 0.12);
  }

  .contact-info-icon {
    width: 56px;
    height: 56px;
    margin: 0 auto 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-navy-deep);
    color: var(--color-orange);
  }

  .contact-info-icon svg {
    width: 28px;
    height: 28px;
  }

  .contact-info-card h3 {
    font-family: var(--font-display);
    font-size: 16px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 12px;
    color: var(--color-navy-deep);
  }

  .contact-info-card a {
    font-size: 18px;
    font-weight: 600;
    color: var(--color-gray-dark);
    transition: color 0.3s var(--ease-out);
  }

  .contact-info-card a:hover {
    color: var(--color-orange);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .intro-content {
      grid-template-columns: 1fr;
      gap: 40px;
    }

    .form-row {
      grid-template-columns: 1fr;
    }

    .contact-form-section {
      padding: 80px 20px;
    }

    .contact-form {
      min-height: 500px;
    }

    .form-success {
      padding: 40px 20px;
    }

    .success-envelope {
      width: 120px;
      height: 120px;
      margin-bottom: 24px;
    }

    .envelope-icon {
      width: 60px;
      height: 60px;
    }

    .success-checkmark {
      width: 40px;
      height: 40px;
    }

    .success-checkmark svg {
      width: 24px;
      height: 24px;
    }

    .success-title {
      font-size: 24px;
    }

    .success-text {
      font-size: 14px;
    }

    .quote-section {
      padding: 80px 20px;
    }

    .quote-large {
      font-size: 24px;
      padding-left: 24px;
    }

    .quote-large::before {
      width: 4px;
    }
  }

  /* Animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .reveal {
    opacity: 0;
    animation: fadeInUp 0.6s var(--ease-out) forwards;
  }

  .reveal.visible {
    animation: fadeInUp 0.6s var(--ease-out) forwards;
  }

  /* Prefers Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .reveal,
    .trust-card,
    .contact-info-card {
      animation: none;
      opacity: 1;
      transform: none;
    }
  }
</style>

<script>
  // Form handling
  const form = document.getElementById('contactForm') as HTMLFormElement;
  const formFields = document.getElementById('formFields') as HTMLDivElement;
  const formSuccess = document.getElementById('formSuccess') as HTMLDivElement;
  const formMessage = document.getElementById('formMessage') as HTMLDivElement;
  const sendAnotherBtn = document.getElementById('sendAnother') as HTMLButtonElement;

  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const formData = new FormData(form);
      const data = {
        name: formData.get('name') as string,
        email: formData.get('email') as string,
        message: formData.get('message') as string,
      };

      // Show loading state
      const submitBtn = form.querySelector('.btn-submit') as HTMLButtonElement;
      const btnText = submitBtn.querySelector('.btn-text') as HTMLSpanElement;
      const originalText = btnText.textContent;
      btnText.textContent = 'Отправка...';
      submitBtn.disabled = true;

      try {
        const response = await fetch('/api/contact', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        const result = await response.json();

        if (!response.ok || !result.success) {
          throw new Error(result.error || 'Ошибка отправки');
        }

        // Hide form fields with animation
        formFields.classList.add('hiding');

        // Wait for fade out animation
        setTimeout(() => {
          formFields.style.display = 'none';
          formSuccess.style.display = 'flex';

          // Show success state with animation
          setTimeout(() => {
            formSuccess.classList.add('showing');
          }, 50);
        }, 500);

      } catch (error) {
        // Show error message
        formMessage.className = 'form-message error';
        formMessage.textContent = error instanceof Error
          ? error.message
          : 'Произошла ошибка. Пожалуйста, попробуйте еще раз или свяжитесь с нами напрямую.';

        btnText.textContent = originalText;
        submitBtn.disabled = false;

        // Hide error after 5 seconds
        setTimeout(() => {
          formMessage.style.display = 'none';
        }, 5000);
      }
    });

    // "Send another message" button handler
    if (sendAnotherBtn) {
      sendAnotherBtn.addEventListener('click', () => {
        // Hide success state
        formSuccess.classList.remove('showing');

        setTimeout(() => {
          formSuccess.style.display = 'none';
          formFields.style.display = 'flex';
          formFields.classList.remove('hiding');

          // Reset form
          form.reset();

          // Reset button state
          const submitBtn = form.querySelector('.btn-submit') as HTMLButtonElement;
          const btnText = submitBtn.querySelector('.btn-text') as HTMLSpanElement;
          btnText.textContent = 'Отправить сообщение';
          submitBtn.disabled = false;
        }, 500);
      });
    }
  }
</script>
</Layout>
